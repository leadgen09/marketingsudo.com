<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MarketingSudo</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .nav-link {
            transition: all 0.2s ease;
            border-radius: 0.5rem;
        }
        .nav-link:hover {
            background-color: rgba(59, 130, 246, 0.1);
        }
        .nav-link.active {
            background-color: rgba(59, 130, 246, 0.1);
            color: rgb(59, 130, 246);
        }
        .community-card {
            transition: all 0.3s ease;
        }
        .community-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }
        .gradient-bg {
            background: linear-gradient(135deg, #f6f8ff 0%, #f0f4ff 100%);
        }
    </style>
</head>
<body class="gradient-bg">
    <div class="flex h-screen">
        <!-- Left Navigation Bar -->
        <nav class="w-64 bg-white shadow-lg">
            <div class="p-6">
                <div class="flex items-center mb-8">
                    <h1 class="text-xl font-bold text-gray-900">MarketingSudo</h1>
                </div>
                <div class="space-y-2">
                    <button onclick="showSection('problem-discovery')" class="nav-link active w-full flex items-center px-4 py-3 text-gray-700">
                        <i class="ri-search-line mr-3 text-lg"></i>
                        Problem Discovery
                    </button>
                    <button onclick="showSection('lead-magnet')" class="nav-link w-full flex items-center px-4 py-3 text-gray-700">
                        <i class="ri-file-chart-line mr-3 text-lg"></i>
                        Lead Magnet
                    </button>
                    <button onclick="showSection('community')" class="nav-link w-full flex items-center px-4 py-3 text-gray-700">
                        <i class="ri-group-line mr-3 text-lg"></i>
                        Community
                    </button>
                </div>
            </div>
        </nav>

        <!-- Main Content Area -->
        <div class="flex-1 overflow-y-auto">
            <div class="p-8">
                <!-- Problem Discovery Section -->
                <div id="problem-discovery" class="max-w-4xl mx-auto">
                    <header class="mb-8">
                        <h2 class="text-2xl font-bold text-gray-900">Problem Discovery</h2>
                        <p class="text-gray-600">What's your current struggle? We'll help you solve it fast.</p>
                    </header>

                    <!-- Persona Selection -->
                    <div class="bg-white rounded-lg shadow-lg p-6 mb-8">
                        <h3 class="text-lg font-semibold mb-4">Select Your Persona</h3>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <button onclick="selectPersona('cold-emailer')" class="persona-btn p-4 border rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-all group">
                                <i class="ri-mail-send-line text-2xl mb-2 text-blue-500 group-hover:scale-110 transition-transform"></i>
                                <h4 class="font-medium">Cold Emailer</h4>
                                <p class="text-sm text-gray-600">B2B outreach & lead generation</p>
                                <div class="mt-2 text-blue-500 opacity-0 group-hover:opacity-100 transition-opacity">
                                    <i class="ri-arrow-right-line"></i> Click to explore
                                </div>
                            </button>
                            <button onclick="selectPersona('newsletter-owner')" class="persona-btn p-4 border rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-all group">
                                <i class="ri-newspaper-line text-2xl mb-2 text-blue-500 group-hover:scale-110 transition-transform"></i>
                                <h4 class="font-medium">Newsletter Owner</h4>
                                <p class="text-sm text-gray-600">Digital product & content</p>
                                <div class="mt-2 text-blue-500 opacity-0 group-hover:opacity-100 transition-opacity">
                                    <i class="ri-arrow-right-line"></i> Click to explore
                                </div>
                            </button>
                            <button onclick="selectPersona('saas-founder')" class="persona-btn p-4 border rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-all group">
                                <i class="ri-building-2-line text-2xl mb-2 text-blue-500 group-hover:scale-110 transition-transform"></i>
                                <h4 class="font-medium">SaaS Founder</h4>
                                <p class="text-sm text-gray-600">Product-led growth</p>
                                <div class="mt-2 text-blue-500 opacity-0 group-hover:opacity-100 transition-opacity">
                                    <i class="ri-arrow-right-line"></i> Click to explore
                                </div>
                            </button>
                        </div>
                    </div>

                    <!-- Selection Feedback -->
                    <div id="selectionFeedback" class="bg-white rounded-lg shadow-lg p-6 mb-8 hidden">
                        <div class="flex items-center">
                            <div class="w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mr-4">
                                <i class="ri-check-line text-2xl text-green-500"></i>
                            </div>
                            <div>
                                <h3 class="text-lg font-semibold text-gray-900">Got it!</h3>
                                <p class="text-gray-600">Most creators struggle here. Let's fix it with a lead magnet idea you can use today.</p>
                            </div>
                        </div>
                        <div class="mt-4 flex justify-end">
                            <button onclick="showSection('lead-magnet')" class="flex items-center px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors">
                                <i class="ri-arrow-right-line mr-2"></i>
                                Generate Lead Magnet
                            </button>
                        </div>
                    </div>

                    <!-- Problem Stack Visualizer -->
                    <div id="problemStack" class="bg-white rounded-lg shadow-lg p-6 mb-8 hidden">
                        <h3 class="text-lg font-semibold mb-4">Problem Analysis</h3>
                        <div class="space-y-4">
                            <div class="p-4 bg-red-50 rounded-lg">
                                <div class="flex items-center mb-2">
                                    <i class="ri-alert-line text-red-500 mr-2"></i>
                                    <h4 class="font-medium text-red-700">Surface Problem</h4>
                                </div>
                                <p id="surfaceProblem" class="text-gray-700"></p>
                            </div>
                            <div class="p-4 bg-orange-50 rounded-lg">
                                <div class="flex items-center mb-2">
                                    <i class="ri-search-line text-orange-500 mr-2"></i>
                                    <h4 class="font-medium text-orange-700">Root Problem</h4>
                                </div>
                                <p id="rootProblem" class="text-gray-700"></p>
                            </div>
                            <div class="p-4 bg-blue-50 rounded-lg">
                                <div class="flex items-center mb-2">
                                    <i class="ri-eye-off-line text-blue-500 mr-2"></i>
                                    <h4 class="font-medium text-blue-700">Hidden Problem</h4>
                                </div>
                                <p id="hiddenProblem" class="text-gray-700"></p>
                            </div>
                        </div>
                        <div class="mt-4 flex justify-between items-center">
                            <button onclick="generateActionPlan()" class="flex items-center px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600">
                                <i class="ri-file-list-line mr-2"></i>
                                Generate Action Plan
                            </button>
                            <button onclick="exportProblemAnalysis()" class="flex items-center px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600">
                                <i class="ri-download-line mr-2"></i>
                                Export Analysis
                            </button>
                        </div>
                    </div>

                    <!-- Quick Win Insights -->
                    <div id="quickWinInsights" class="bg-white rounded-lg shadow-lg p-6 mb-8 hidden">
                        <h3 class="text-lg font-semibold mb-4">Quick Win Insights</h3>
                        <div class="space-y-4">
                            <div class="p-4 bg-green-50 rounded-lg">
                                <div class="flex items-center mb-2">
                                    <i class="ri-lightbulb-flash-line text-green-500 mr-2"></i>
                                    <h4 class="font-medium text-green-700">Did You Know?</h4>
                                </div>
                                <p id="quickWinText" class="text-gray-700"></p>
                            </div>
                            <div class="p-4 bg-purple-50 rounded-lg">
                                <div class="flex items-center mb-2">
                                    <i class="ri-timer-line text-purple-500 mr-2"></i>
                                    <h4 class="font-medium text-purple-700">Time to Fix</h4>
                                </div>
                                <p id="timeToFix" class="text-gray-700"></p>
                            </div>
                        </div>
                    </div>

                    <!-- Multiple Problems Selection -->
                    <div id="multipleProblems" class="bg-white rounded-lg shadow-lg p-6 mb-8 hidden">
                        <h3 class="text-lg font-semibold mb-4">Select Additional Problems</h3>
                        <div class="space-y-2">
                            <label class="flex items-center p-3 border rounded-lg hover:bg-gray-50 cursor-pointer group">
                                <input type="checkbox" class="mr-3" onchange="updateProblemSelection(this)">
                                <div>
                                    <h4 class="font-medium">Low Engagement</h4>
                                    <p class="text-sm text-gray-600">Posts getting little to no interaction</p>
                                </div>
                                <div class="ml-auto text-blue-500 opacity-0 group-hover:opacity-100 transition-opacity">
                                    <i class="ri-add-line"></i>
                                </div>
                            </label>
                            <label class="flex items-center p-3 border rounded-lg hover:bg-gray-50 cursor-pointer group">
                                <input type="checkbox" class="mr-3" onchange="updateProblemSelection(this)">
                                <div>
                                    <h4 class="font-medium">Content Creation</h4>
                                    <p class="text-sm text-gray-600">Struggling to create consistent content</p>
                                </div>
                                <div class="ml-auto text-blue-500 opacity-0 group-hover:opacity-100 transition-opacity">
                                    <i class="ri-add-line"></i>
                                </div>
                            </label>
                            <label class="flex items-center p-3 border rounded-lg hover:bg-gray-50 cursor-pointer group">
                                <input type="checkbox" class="mr-3" onchange="updateProblemSelection(this)">
                                <div>
                                    <h4 class="font-medium">Lead Quality</h4>
                                    <p class="text-sm text-gray-600">Getting leads but they're not converting</p>
                                </div>
                                <div class="ml-auto text-blue-500 opacity-0 group-hover:opacity-100 transition-opacity">
                                    <i class="ri-add-line"></i>
                                </div>
                            </label>
                        </div>
                    </div>

                    <!-- Search Section -->
                    <div class="bg-white rounded-lg shadow-lg p-6 mb-8">
                        <div class="max-w-2xl mx-auto">
                            <!-- Search Input -->
                            <div class="relative mb-4">
                                <input 
                                    type="text" 
                                    id="searchInput"
                                    placeholder="Search for problems (e.g., lead generation, marketing automation)"
                                    class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                                >
                                <button 
                                    id="searchButton"
                                    class="absolute right-2 top-1/2 transform -translate-y-1/2 bg-blue-500 text-white px-4 py-1 rounded hover:bg-blue-600 transition-colors"
                                >
                                    <i class="ri-search-line"></i>
                                </button>
                            </div>

                            <!-- Search Options -->
                            <div class="flex flex-wrap gap-4 mb-4">
                                <!-- Time Period Selector -->
                                <div class="flex items-center space-x-2">
                                    <label class="text-sm text-gray-600">Time:</label>
                                    <select id="timeFilter" class="text-sm border rounded px-2 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500">
                                        <option value="day">Today</option>
                                        <option value="week">This Week</option>
                                        <option value="month" selected>This Month</option>
                                        <option value="year">This Year</option>
                                        <option value="all">All Time</option>
                                    </select>
                                </div>

                                <!-- Sort Order Selector -->
                                <div class="flex items-center space-x-2">
                                    <label class="text-sm text-gray-600">Sort by:</label>
                                    <select id="sortFilter" class="text-sm border rounded px-2 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500">
                                        <option value="relevance" selected>Relevance</option>
                                        <option value="new">Newest</option>
                                        <option value="top">Most Upvoted</option>
                                        <option value="comments">Most Comments</option>
                                    </select>
                                </div>
                            </div>

                            <!-- Quick Search Suggestions -->
                            <div class="text-sm text-gray-500">
                                Popular: 
                                <button class="text-blue-500 hover:underline" onclick="quickSearch('lead generation')">lead generation</button>,
                                <button class="text-blue-500 hover:underline" onclick="quickSearch('marketing automation')">marketing automation</button>,
                                <button class="text-blue-500 hover:underline" onclick="quickSearch('email marketing')">email marketing</button>
                            </div>
                        </div>
                    </div>

                    <!-- Loading State -->
                    <div id="loadingState" class="hidden">
                        <div class="animate-pulse space-y-4">
                            <div class="bg-white rounded-lg shadow p-6">
                                <div class="h-4 bg-gray-200 rounded w-1/4 mb-4"></div>
                                <div class="h-8 bg-gray-200 rounded w-3/4 mb-4"></div>
                                <div class="h-4 bg-gray-200 rounded w-full"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Results Stats -->
                    <div id="resultsStats" class="hidden mb-4 text-sm text-gray-600"></div>

                    <!-- Results Container -->
                    <div id="resultsContainer"></div>
                </div>

                <!-- Lead Magnet Section -->
                <div id="lead-magnet" class="max-w-4xl mx-auto hidden">
                    <header class="mb-8">
                        <h2 class="text-2xl font-bold text-gray-900">Lead Magnet Generator</h2>
                        <p class="text-gray-600">Create compelling case studies and data-driven stories</p>
                    </header>

                    <!-- Industry Presets -->
                    <div class="bg-white rounded-lg shadow-lg p-6 mb-8">
                        <h3 class="text-lg font-semibold mb-4">Industry Presets</h3>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <button onclick="loadPreset('b2b-saas')" class="preset-btn p-4 border rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-all">
                                <i class="ri-building-2-line text-2xl mb-2 text-blue-500"></i>
                                <h4 class="font-medium">B2B SaaS</h4>
                                <p class="text-sm text-gray-600">Product-led growth</p>
                            </button>
                            <button onclick="loadPreset('agency')" class="preset-btn p-4 border rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-all">
                                <i class="ri-service-line text-2xl mb-2 text-blue-500"></i>
                                <h4 class="font-medium">Agency</h4>
                                <p class="text-sm text-gray-600">Service-based business</p>
                            </button>
                            <button onclick="loadPreset('solopreneur')" class="preset-btn p-4 border rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-all">
                                <i class="ri-user-line text-2xl mb-2 text-blue-500"></i>
                                <h4 class="font-medium">Solopreneur</h4>
                                <p class="text-sm text-gray-600">One-person business</p>
                            </button>
                        </div>
                    </div>

                    <!-- Lead Magnet Form -->
                    <div class="bg-white rounded-lg shadow-lg p-6 mb-8">
                        <div class="space-y-6">
                            <!-- Story Type Selection -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Story Type</label>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <button onclick="selectTemplate('case-study')" class="story-type-btn p-4 border rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-all" data-type="case-study">
                                        <i class="ri-file-chart-line text-2xl mb-2"></i>
                                        <h3 class="font-semibold">Case Study</h3>
                                        <p class="text-sm text-gray-600">Share a detailed success story with results and process</p>
                                    </button>
                                    <button onclick="selectTemplate('quick-win')" class="story-type-btn p-4 border rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-all" data-type="quick-win">
                                        <i class="ri-flashlight-line text-2xl mb-2"></i>
                                        <h3 class="font-semibold">Quick Win Story</h3>
                                        <p class="text-sm text-gray-600">Share a quick success story with immediate value</p>
                                    </button>
                                </div>
                            </div>

                            <!-- Story Details -->
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Attention-Grabbing Headline</label>
                                    <div class="flex gap-2">
                                        <input type="text" id="headline" class="flex-1 px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" 
                                            placeholder="e.g., How I Generated $10,000 in 24 Hours Using One Simple Email">
                                        <button onclick="regenerateField('headline')" class="px-3 py-2 bg-gray-100 text-gray-600 rounded-lg hover:bg-gray-200">
                                            <i class="ri-refresh-line"></i>
                                        </button>
                                    </div>
                                </div>

                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Key Results (Separate with new lines)</label>
                                    <div class="flex gap-2">
                                        <textarea id="results" rows="3" class="flex-1 px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                                            placeholder="- Generated $10,000 in revenue&#10;- Closed 2 high-ticket clients&#10;- Only took 8 hours"></textarea>
                                        <button onclick="regenerateField('results')" class="px-3 py-2 bg-gray-100 text-gray-600 rounded-lg hover:bg-gray-200">
                                            <i class="ri-refresh-line"></i>
                                        </button>
                                    </div>
                                </div>

                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Story/Process</label>
                                    <div class="flex gap-2">
                                        <textarea id="story" rows="6" class="flex-1 px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                                            placeholder="Share your story in a conversational way. Include:&#10;- The situation/challenge&#10;- What you did&#10;- How you did it&#10;- The results&#10;- Key takeaways"></textarea>
                                        <button onclick="regenerateField('story')" class="px-3 py-2 bg-gray-100 text-gray-600 rounded-lg hover:bg-gray-200">
                                            <i class="ri-refresh-line"></i>
                                        </button>
                                    </div>
                                </div>

                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Key Takeaways/Tips</label>
                                    <div class="flex gap-2">
                                        <textarea id="takeaways" rows="3" class="flex-1 px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                                            placeholder="- Keep your cold emails simple and direct&#10;- Focus on local businesses for quick wins&#10;- Don't overcomplicate the process"></textarea>
                                        <button onclick="regenerateField('takeaways')" class="px-3 py-2 bg-gray-100 text-gray-600 rounded-lg hover:bg-gray-200">
                                            <i class="ri-refresh-line"></i>
                                        </button>
                                    </div>
                                </div>

                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Call to Action</label>
                                    <div class="flex gap-2">
                                        <input type="text" id="cta" class="flex-1 px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                                            placeholder="e.g., Want to learn more? DM me for the exact email template I used">
                                        <button onclick="regenerateField('cta')" class="px-3 py-2 bg-gray-100 text-gray-600 rounded-lg hover:bg-gray-200">
                                            <i class="ri-refresh-line"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <!-- Export Options -->
                            <div class="flex flex-wrap gap-4">
                                <button onclick="generatePDF()" class="flex items-center px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600">
                                    <i class="ri-file-pdf-line mr-2"></i>
                                    Export as PDF
                                </button>
                                <button onclick="generateNotion()" class="flex items-center px-4 py-2 bg-gray-900 text-white rounded hover:bg-gray-800">
                                    <i class="ri-notion-line mr-2"></i>
                                    Export for Notion
                                </button>
                                <button onclick="copyToClipboard()" class="flex items-center px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600">
                                    <i class="ri-clipboard-line mr-2"></i>
                                    Copy as Text
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Pro Tips -->
                    <div id="proTips" class="bg-white rounded-lg shadow-lg p-6 mb-8 hidden">
                        <h3 class="text-lg font-semibold mb-4">Pro Tips</h3>
                        <div class="space-y-4">
                            <div class="p-4 bg-yellow-50 rounded-lg">
                                <div class="flex items-center mb-2">
                                    <i class="ri-lightbulb-flash-line text-yellow-500 mr-2"></i>
                                    <h4 class="font-medium text-yellow-700">Distribution Strategy</h4>
                                </div>
                                <p class="text-gray-700">Pair this lead magnet with a Reddit post and DM follow-up to get 20+ subs/day. Post in 3-5 relevant subreddits and engage with comments.</p>
                            </div>
                            <div class="p-4 bg-blue-50 rounded-lg">
                                <div class="flex items-center mb-2">
                                    <i class="ri-timer-line text-blue-500 mr-2"></i>
                                    <h4 class="font-medium text-blue-700">Timing</h4>
                                </div>
                                <p class="text-gray-700">Best posting times: Tuesday 10am EST and Thursday 2pm EST. Schedule your posts for maximum visibility.</p>
                            </div>
                        </div>
                    </div>

                    <!-- Preview Section -->
                    <div id="preview" class="bg-white rounded-lg shadow-lg p-6">
                        <div class="flex justify-between items-center mb-4">
                            <h2 class="text-xl font-bold">Preview</h2>
                            <button onclick="copyPreviewToClipboard()" class="flex items-center px-3 py-1 bg-gray-100 text-gray-600 rounded hover:bg-gray-200">
                                <i class="ri-clipboard-line mr-2"></i>
                                Copy
                            </button>
                        </div>
                        <div id="previewContent" class="prose max-w-none">
                            <!-- Preview content will be inserted here -->
                        </div>
                    </div>
                </div>

                <!-- Community Section -->
                <div id="community" class="max-w-4xl mx-auto hidden">
                    <header class="mb-8">
                        <h2 class="text-2xl font-bold text-gray-900">Join Our Community</h2>
                        <p class="text-gray-600">Connect with fellow marketers and grow together</p>
                    </header>

                    <!-- Group Finder Quiz -->
                    <div class="bg-white rounded-lg shadow-lg p-6 mb-8">
                        <h3 class="text-lg font-semibold mb-4">Find Your Perfect Community</h3>
                        <div id="quizContainer">
                            <div class="space-y-6">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">What's your primary focus?</label>
                                    <select id="quizFocus" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                                        <option value="">Select your focus</option>
                                        <option value="b2b">B2B Marketing</option>
                                        <option value="b2c">B2C Marketing</option>
                                        <option value="saas">SaaS Growth</option>
                                        <option value="agency">Agency Growth</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">What's your biggest challenge?</label>
                                    <select id="quizChallenge" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                                        <option value="">Select your challenge</option>
                                        <option value="leads">Generating Leads</option>
                                        <option value="conversion">Improving Conversion</option>
                                        <option value="retention">Customer Retention</option>
                                        <option value="scaling">Scaling Operations</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Preferred communication style?</label>
                                    <select id="quizStyle" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                                        <option value="">Select your style</option>
                                        <option value="casual">Casual & Quick</option>
                                        <option value="formal">Formal & Detailed</option>
                                        <option value="mixed">Mix of Both</option>
                                    </select>
                                </div>
                                <button onclick="submitQuiz()" class="w-full bg-blue-500 text-white py-2 rounded-lg hover:bg-blue-600">
                                    Find My Communities
                                </button>
                            </div>
                        </div>
                        <div id="quizResults" class="hidden mt-6">
                            <div class="bg-blue-50 p-4 rounded-lg">
                                <h4 class="font-medium text-blue-700 mb-2">Perfect Communities for You</h4>
                                <p class="text-gray-700 mb-4">We're curating the best communities based on your preferences. Drop your email to get early access to our hand-picked recommendations.</p>
                                <div class="flex gap-4">
                                    <input type="email" placeholder="Enter your email" class="flex-1 px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                                    <button class="bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600">
                                        Get Access
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Platform Leaderboard -->
                    <div class="bg-white rounded-lg shadow-lg p-6 mb-8">
                        <h3 class="text-lg font-semibold mb-4">Top Marketing Communities</h3>
                        <div class="space-y-4">
                            <div class="flex items-center p-4 border rounded-lg">
                                <div class="w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mr-4">
                                    <i class="ri-whatsapp-line text-2xl text-green-500"></i>
                                </div>
                                <div class="flex-1">
                                    <h4 class="font-medium">WhatsApp Groups</h4>
                                    <p class="text-sm text-gray-600">Real-time discussions & quick tips</p>
                                </div>
                                <span class="text-sm text-gray-500">Top 10 coming soon</span>
                            </div>
                            <div class="flex items-center p-4 border rounded-lg">
                                <div class="w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center mr-4">
                                    <i class="ri-slack-line text-2xl text-purple-500"></i>
                                </div>
                                <div class="flex-1">
                                    <h4 class="font-medium">Slack Workspaces</h4>
                                    <p class="text-sm text-gray-600">Organized discussions & resources</p>
                                </div>
                                <span class="text-sm text-gray-500">Top 10 coming soon</span>
                            </div>
                            <div class="flex items-center p-4 border rounded-lg">
                                <div class="w-12 h-12 bg-indigo-100 rounded-full flex items-center justify-center mr-4">
                                    <i class="ri-discord-line text-2xl text-indigo-500"></i>
                                </div>
                                <div class="flex-1">
                                    <h4 class="font-medium">Discord Servers</h4>
                                    <p class="text-sm text-gray-600">Voice chats & community events</p>
                                </div>
                                <span class="text-sm text-gray-500">Top 10 coming soon</span>
                            </div>
                        </div>
                    </div>

                    <!-- Community Growth Blueprint -->
                    <div class="bg-white rounded-lg shadow-lg p-6">
                        <h3 class="text-lg font-semibold mb-4">Community Growth Blueprint</h3>
                        <div class="prose max-w-none">
                            <h4 class="text-blue-700">How to turn 3 group posts a week into 100 subscribers/month (without spamming)</h4>
                            <ol class="list-decimal pl-5 space-y-2">
                                <li>Find 3-5 high-quality groups in your niche</li>
                                <li>Create a content calendar with 3 types of posts:
                                    <ul class="list-disc pl-5">
                                        <li>Value posts (tips, insights)</li>
                                        <li>Engagement posts (questions, polls)</li>
                                        <li>Story posts (case studies, experiences)</li>
                                    </ul>
                                </li>
                                <li>Engage with other members' posts daily</li>
                                <li>Include a subtle CTA in your bio/profile</li>
                                <li>Track which posts drive the most engagement</li>
                            </ol>
                            <div class="mt-4">
                                <button class="bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600">
                                    Download Full Blueprint
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Update showSection function
        function showSection(section) {
            // Update navigation styles
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
            });
            const activeLink = document.querySelector(`[onclick="showSection('${section}')"]`);
            activeLink.classList.add('active');

            // Show/hide sections
            document.getElementById('problem-discovery').classList.toggle('hidden', section !== 'problem-discovery');
            document.getElementById('lead-magnet').classList.toggle('hidden', section !== 'lead-magnet');
            document.getElementById('community').classList.toggle('hidden', section !== 'community');
        }

        // Reddit search functions
        const searchInput = document.getElementById('searchInput');
        const searchButton = document.getElementById('searchButton');
        const timeFilter = document.getElementById('timeFilter');
        const sortFilter = document.getElementById('sortFilter');
        const loadingState = document.getElementById('loadingState');
        const resultsStats = document.getElementById('resultsStats');
        const resultsContainer = document.getElementById('resultsContainer');

        searchButton.addEventListener('click', handleSearch);
        searchInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') handleSearch();
        });
        timeFilter.addEventListener('change', handleSearch);
        sortFilter.addEventListener('change', handleSearch);

        function quickSearch(query) {
            searchInput.value = query;
            handleSearch();
        }

        async function handleSearch() {
            const query = searchInput.value.trim();
            if (!query) return;

            showLoading();
            hideError();

            try {
                const time = timeFilter.value;
                const sort = sortFilter.value;
                
                const searchUrl = `https://www.reddit.com/search.json?q=${encodeURIComponent(query)}+self:yes&sort=${sort}&t=${time}&limit=25`;
                const response = await fetch(searchUrl);
                
                if (!response.ok) {
                    throw new Error('Failed to fetch results');
                }

                const data = await response.json();
                const problems = processRedditResults(data.data.children);
                displayResults(problems, query);
            } catch (error) {
                console.error('Search error:', error);
                showError(error.message);
            } finally {
                hideLoading();
            }
        }

        function processRedditResults(posts) {
            return posts
                .filter(post => post.data.is_self && !post.data.over_18)
                .map(post => ({
                    title: post.data.title,
                    description: post.data.selftext.substring(0, 200) + '...',
                    date: formatDate(post.data.created_utc),
                    comments: post.data.num_comments,
                    upvotes: post.data.ups,
                    url: `https://reddit.com${post.data.permalink}`,
                    subreddit: post.data.subreddit_name_prefixed,
                    tag: getPostTag(post.data)
                }));
        }

        function formatDate(timestamp) {
            const date = new Date(timestamp * 1000);
            const now = new Date();
            const diffDays = Math.floor((now - date) / (1000 * 60 * 60 * 24));
            
            if (diffDays === 0) return 'Today';
            if (diffDays === 1) return 'Yesterday';
            if (diffDays < 7) return `${diffDays} days ago`;
            return date.toLocaleDateString();
        }

        function getPostTag(postData) {
            if (postData.ups > 500) return 'HOT';
            if (postData.ups > 100) return 'TRENDING';
            return 'NEW';
        }

        function displayResults(problems, query) {
            resultsStats.classList.remove('hidden');
            resultsStats.textContent = `Found ${problems.length} results for "${query}" â€¢ ${timeFilter.options[timeFilter.selectedIndex].text} â€¢ Sorted by ${sortFilter.options[sortFilter.selectedIndex].text}`;

            if (problems.length === 0) {
                resultsContainer.innerHTML = `
                    <div class="text-center py-8 text-gray-500">
                        No results found. Try different keywords or filters.
                    </div>
                `;
                return;
            }

            resultsContainer.innerHTML = problems.map(problem => `
                <div class="bg-white rounded-lg shadow p-6 mb-4 hover:shadow-lg transition-shadow">
                    <div class="flex items-center mb-2">
                        <span class="px-2 py-1 bg-red-100 text-red-600 rounded text-sm mr-2">${problem.tag}</span>
                        <span class="text-sm text-gray-500">${problem.date}</span>
                        <span class="text-sm text-gray-500 ml-2">${problem.subreddit}</span>
                    </div>
                    <h2 class="text-xl font-bold mb-2">
                        <a href="${problem.url}" target="_blank" class="hover:text-blue-600">
                            ${problem.title}
                        </a>
                    </h2>
                    <p class="text-gray-600 mb-4">${problem.description}</p>
                    <div class="flex items-center text-sm text-gray-500 space-x-4">
                        <span>${problem.comments} comments</span>
                        <span>${problem.upvotes} upvotes</span>
                    </div>
                </div>
            `).join('');
        }

        function showLoading() {
            loadingState.classList.remove('hidden');
            resultsContainer.innerHTML = '';
            resultsStats.classList.add('hidden');
        }

        function hideLoading() {
            loadingState.classList.add('hidden');
        }

        function hideError() {
            // Implementation remains the same
        }

        // Lead magnet functions
        function selectTemplate(type) {
            document.querySelectorAll('.story-type-btn').forEach(btn => {
                btn.classList.remove('border-blue-500', 'bg-blue-50');
            });
            document.querySelector(`[data-type="${type}"]`).classList.add('border-blue-500', 'bg-blue-50');
            
            if (type === 'quick-win') {
                document.getElementById('headline').value = 'How I Made a Client $10,000 While Watching Reacher';
                document.getElementById('results').value = '- Generated $10,000 in revenue\n- Closed 2 high-ticket clients\n- Only took 8 hours';
                document.getElementById('story').value = 'It was one of those lazy evenings.\n\nReacher on screen. Coffee in hand. Brain on airplane mode.\n\nThen my phone lights up -\n\n"Hey man, can you get me 2 leads in the next 24 hours?"\n\nNo intro. No context. Just pure panic energy.';
                document.getElementById('takeaways').value = '- Simple cold emails work better\n- Local businesses are goldmines\n- Speed beats perfection';
                document.getElementById('cta').value = 'Want the exact email template? Drop a ðŸ‘‹ in the comments!';
            } else {
                document.getElementById('headline').value = 'We Generated 1,200 Sales Opportunities from 127,000 Cold Emails';
                document.getElementById('results').value = '- 1,200 qualified opportunities\n- 127,000 emails sent\n- 6 different targeting strategies tested';
                document.getElementById('story').value = 'After analyzing our March campaign data, we uncovered some fascinating insights about what really works in cold email outreach.\n\nWe tested multiple data sources, copywriting approaches, and targeting strategies.';
                document.getElementById('takeaways').value = '- Facebook groups are goldmines for targeted leads\n- AI copywriting works with the right prompts\n- Event-based outreach has highest conversion';
                document.getElementById('cta').value = 'Want our complete cold email playbook? Click the link in my bio!';
            }
            updatePreview();
        }

        function updatePreview() {
            const headline = document.getElementById('headline').value;
            const results = document.getElementById('results').value;
            const story = document.getElementById('story').value;
            const takeaways = document.getElementById('takeaways').value;
            const cta = document.getElementById('cta').value;

            const previewHtml = `
                <h1 class="text-2xl font-bold mb-4">${headline}</h1>
                
                <div class="mb-6">
                    <h3 class="font-bold mb-2">Key Results:</h3>
                    <ul class="list-disc pl-5">
                        ${results.split('\n').map(result => `<li>${result.replace(/^-\s*/, '')}</li>`).join('')}
                    </ul>
                </div>

                <div class="mb-6 whitespace-pre-wrap">${story}</div>

                <div class="mb-6">
                    <h3 class="font-bold mb-2">Key Takeaways:</h3>
                    <ul class="list-disc pl-5">
                        ${takeaways.split('\n').map(takeaway => `<li>${takeaway.replace(/^-\s*/, '')}</li>`).join('')}
                    </ul>
                </div>

                <div class="mt-4 p-4 bg-gray-100 rounded-lg">
                    <p class="font-bold">${cta}</p>
                </div>
            `;

            document.getElementById('previewContent').innerHTML = previewHtml;
        }

        function generatePDF() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            
            const content = document.getElementById('previewContent');
            doc.html(content, {
                callback: function(doc) {
                    doc.save('lead-magnet.pdf');
                },
                x: 15,
                y: 15,
                width: 170
            });
        }

        function generateNotion() {
            const headline = document.getElementById('headline').value;
            const results = document.getElementById('results').value;
            const story = document.getElementById('story').value;
            const takeaways = document.getElementById('takeaways').value;
            const cta = document.getElementById('cta').value;

            const notionFormat = `# ${headline}

## Key Results
${results}

## Story
${story}

## Key Takeaways
${takeaways}

## Call to Action
${cta}`;

            const blob = new Blob([notionFormat], { type: 'text/plain' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'lead-magnet.md';
            a.click();
        }

        function copyToClipboard() {
            const content = document.getElementById('previewContent').innerText;
            navigator.clipboard.writeText(content).then(() => {
                alert('Content copied to clipboard!');
            });
        }

        // Event listeners for real-time preview
        ['headline', 'results', 'story', 'takeaways', 'cta'].forEach(id => {
            document.getElementById(id)?.addEventListener('input', updatePreview);
        });

        // Add these new functions to your existing script
        function selectPersona(persona) {
            document.querySelectorAll('.persona-btn').forEach(btn => {
                btn.classList.remove('border-blue-500', 'bg-blue-50');
            });
            document.querySelector(`[onclick="selectPersona('${persona}')"]`).classList.add('border-blue-500', 'bg-blue-50');

            const problems = {
                'cold-emailer': {
                    surface: "Low response rates and high bounce rates in cold outreach",
                    root: "Targeting wrong ICP and using generic messaging",
                    hidden: "Not leveraging social proof and personalization effectively",
                    quickWin: "95% of cold emailers waste time on generic templates. The top 5% use personalized hooks based on recent company news.",
                    timeToFix: "You can improve response rates by 300% in just 7 days with our proven framework."
                },
                'newsletter-owner': {
                    surface: "Low open rates and subscriber growth",
                    root: "Content not aligned with audience needs",
                    hidden: "Missing clear value proposition and content distribution strategy",
                    quickWin: "Newsletters that grow fastest use a 3:1 ratio of educational to promotional content.",
                    timeToFix: "Implement our content framework and see 40% higher open rates in 14 days."
                },
                'saas-founder': {
                    surface: "Low conversion rates and high churn",
                    root: "Product-market fit issues and poor onboarding",
                    hidden: "Not leveraging customer success stories and social proof",
                    quickWin: "SaaS companies that document their first 100 customers see 3x faster growth.",
                    timeToFix: "Fix your onboarding flow and reduce churn by 50% in 30 days."
                }
            };

            document.getElementById('problemStack').classList.remove('hidden');
            document.getElementById('quickWinInsights').classList.remove('hidden');
            document.getElementById('multipleProblems').classList.remove('hidden');
            document.getElementById('selectionFeedback').classList.remove('hidden');
            
            document.getElementById('surfaceProblem').textContent = problems[persona].surface;
            document.getElementById('rootProblem').textContent = problems[persona].root;
            document.getElementById('hiddenProblem').textContent = problems[persona].hidden;
            document.getElementById('quickWinText').textContent = problems[persona].quickWin;
            document.getElementById('timeToFix').textContent = problems[persona].timeToFix;

            // Auto-fill search with relevant terms
            const searchTerms = {
                'cold-emailer': 'cold email response rates bounce rates',
                'newsletter-owner': 'newsletter growth open rates',
                'saas-founder': 'saas conversion churn onboarding'
            };
            document.getElementById('searchInput').value = searchTerms[persona];
            handleSearch();
        }

        function updateProblemSelection(checkbox) {
            const selectedProblems = Array.from(document.querySelectorAll('#multipleProblems input[type="checkbox"]:checked'))
                .map(cb => cb.nextElementSibling.querySelector('h4').textContent);
            
            if (selectedProblems.length > 0) {
                document.getElementById('generateActionPlan').classList.remove('hidden');
            } else {
                document.getElementById('generateActionPlan').classList.add('hidden');
            }
        }

        function generateActionPlan() {
            const selectedProblems = Array.from(document.querySelectorAll('#multipleProblems input[type="checkbox"]:checked'))
                .map(cb => cb.nextElementSibling.querySelector('h4').textContent);
            
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            
            doc.setFontSize(16);
            doc.text('Your Marketing Action Plan', 20, 20);
            
            doc.setFontSize(12);
            let y = 40;
            selectedProblems.forEach((problem, index) => {
                doc.text(`${index + 1}. ${problem}`, 20, y);
                y += 10;
                doc.text('Action Steps:', 20, y);
                y += 10;
                doc.text('- Research and implement best practices', 25, y);
                y += 10;
                doc.text('- Create content addressing this issue', 25, y);
                y += 10;
                doc.text('- Track and measure improvements', 25, y);
                y += 15;
            });
            
            doc.save('marketing-action-plan.pdf');
        }

        function exportProblemAnalysis() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            
            const surface = document.getElementById('surfaceProblem').textContent;
            const root = document.getElementById('rootProblem').textContent;
            const hidden = document.getElementById('hiddenProblem').textContent;
            
            doc.setFontSize(16);
            doc.text('Problem Analysis Report', 20, 20);
            
            doc.setFontSize(12);
            doc.text('Surface Problem:', 20, 40);
            doc.text(surface, 20, 50, { maxWidth: 170 });
            
            doc.text('Root Problem:', 20, 80);
            doc.text(root, 20, 90, { maxWidth: 170 });
            
            doc.text('Hidden Problem:', 20, 120);
            doc.text(hidden, 20, 130, { maxWidth: 170 });
            
            doc.save('problem-analysis.pdf');
        }

        function loadPreset(preset) {
            document.querySelectorAll('.preset-btn').forEach(btn => {
                btn.classList.remove('border-blue-500', 'bg-blue-50');
            });
            document.querySelector(`[onclick="loadPreset('${preset}')"]`).classList.add('border-blue-500', 'bg-blue-50');

            const presets = {
                'b2b-saas': {
                    headline: "How We Grew Our SaaS from 0 to $50K MRR in 6 Months",
                    results: "- Achieved $50K MRR\n- 500+ active users\n- 85% retention rate",
                    story: "When we launched our SaaS product, we knew we had something special. But getting those first customers was tough.\n\nWe tried everything from cold outreach to content marketing. What worked? A combination of product-led growth and strategic partnerships.",
                    takeaways: "- Focus on product-led growth\n- Build strategic partnerships\n- Leverage customer success stories",
                    cta: "Want our complete SaaS growth playbook? Click here to download!"
                },
                'agency': {
                    headline: "How We Generated $100K in New Business with One Case Study",
                    results: "- $100K in new business\n- 15 new clients\n- 3x higher conversion rate",
                    story: "As a digital agency, we struggled to stand out in a crowded market. Then we discovered the power of case studies.\n\nWe documented one of our most successful projects in detail, showing exactly how we helped a client achieve their goals.",
                    takeaways: "- Document your process\n- Show real results\n- Make it replicable",
                    cta: "Want to see the exact case study that generated $100K? Download it here!"
                },
                'solopreneur': {
                    headline: "How I Built a $10K/Month Business Working 20 Hours a Week",
                    results: "- $10K monthly revenue\n- 20 hours/week\n- 100% remote",
                    story: "I was tired of the 9-to-5 grind. So I started a side hustle that turned into a full-time business.\n\nHere's exactly how I did it, step by step, with all the mistakes and lessons learned along the way.",
                    takeaways: "- Start small and scale\n- Automate everything\n- Focus on high-value tasks",
                    cta: "Want my exact business blueprint? Grab it here!"
                }
            };

            const presetData = presets[preset];
            document.getElementById('headline').value = presetData.headline;
            document.getElementById('results').value = presetData.results;
            document.getElementById('story').value = presetData.story;
            document.getElementById('takeaways').value = presetData.takeaways;
            document.getElementById('cta').value = presetData.cta;

            document.getElementById('proTips').classList.remove('hidden');
            updatePreview();
        }

        // Initialize
        showSection('problem-discovery');
        quickSearch('marketing strategy');

        // Add these new functions to your existing script
        function submitQuiz() {
            const focus = document.getElementById('quizFocus').value;
            const challenge = document.getElementById('quizChallenge').value;
            const style = document.getElementById('quizStyle').value;

            if (!focus || !challenge || !style) {
                alert('Please answer all questions');
                return;
            }

            document.getElementById('quizContainer').classList.add('hidden');
            document.getElementById('quizResults').classList.remove('hidden');
        }

        function regenerateField(fieldId) {
            const field = document.getElementById(fieldId);
            const presets = {
                'headline': [
                    "How I Generated $10,000 in 24 Hours Using One Simple Email",
                    "The 3-Step Framework That Got Me 100+ Clients in 30 Days",
                    "How We Grew Our SaaS from 0 to $50K MRR in 6 Months"
                ],
                'results': [
                    "- Generated $10,000 in revenue\n- Closed 2 high-ticket clients\n- Only took 8 hours",
                    "- 100+ new clients\n- 85% conversion rate\n- Zero ad spend",
                    "- $50K monthly recurring revenue\n- 500+ active users\n- 85% retention rate"
                ],
                'story': [
                    "It was one of those lazy evenings.\n\nReacher on screen. Coffee in hand. Brain on airplane mode.\n\nThen my phone lights up -\n\n'Hey man, can you get me 2 leads in the next 24 hours?'\n\nNo intro. No context. Just pure panic energy.",
                    "When we launched our SaaS product, we knew we had something special. But getting those first customers was tough.\n\nWe tried everything from cold outreach to content marketing. What worked? A combination of product-led growth and strategic partnerships.",
                    "As a digital agency, we struggled to stand out in a crowded market. Then we discovered the power of case studies.\n\nWe documented one of our most successful projects in detail, showing exactly how we helped a client achieve their goals."
                ],
                'takeaways': [
                    "- Keep your cold emails simple and direct\n- Focus on local businesses for quick wins\n- Don't overcomplicate the process",
                    "- Focus on product-led growth\n- Build strategic partnerships\n- Leverage customer success stories",
                    "- Document your process\n- Show real results\n- Make it replicable"
                ],
                'cta': [
                    "Want to learn more? DM me for the exact email template I used",
                    "Want our complete SaaS growth playbook? Click here to download!",
                    "Want to see the exact case study that generated $100K? Download it here!"
                ]
            };

            const randomIndex = Math.floor(Math.random() * presets[fieldId].length);
            field.value = presets[fieldId][randomIndex];
            updatePreview();
        }

        function copyPreviewToClipboard() {
            const content = document.getElementById('previewContent').innerText;
            navigator.clipboard.writeText(content).then(() => {
                const button = document.querySelector('[onclick="copyPreviewToClipboard()"]');
                const originalText = button.innerHTML;
                button.innerHTML = '<i class="ri-check-line mr-2"></i>Copied!';
                setTimeout(() => {
                    button.innerHTML = originalText;
                }, 2000);
            });
        }
    </script>
</body>
</html> 